extends layout

block content
  include includes/navbar
  
  if typeof(flash) != 'undefined'
    include includes/flash-messages
    mixin flash-messages(flash)
  
  mixin showName(type, num, link, table)
    div(class="col-md-3 col-sm-6 col-xs-12")
      - flag = false
      table(class='table table-striped table-bordered table-hover')
        thead
          tr
            th 序号
            th(colspan=num)
              if type == 1
                | 男单
              if type == 3
                | 男双
              if type == 4
                | 女双
              if type == 5
                | 混双
        tbody
          - for (var i=0;i<table.length;i++)
            tr
              td #{i+1}
                td
                  p(style=(table[i].studentid == user?'background-color:#dddd44':''))
                    = table[i].nam1
                if num == 2
                  td
                    p(style=(table[i].studentid == user?'background-color:#dddd44':''))
                      = table[i].nam2
              if table[i].studentid == user
                - flag = true
      div(class='text-center')
        if user != null
          if flag == false
            if (sex == 'm' && (type == 1 || type == 3 || type == 5)) || (sex == 'f' && (type == 4 || type == 5))
              - address = './individualApply_' + link
              a(role="button", href=address, class="btn btn-primary")
                | 我要报名
          else
            - address = './individualCancel_' + link
            a(role="button", href=address, class="btn btn-danger")
              | 取消报名
      hr
  
  div(class='container')
    hr
    div(class='panel panel-info')
      div(class='panel-heading')
        h3 2014年清华大学羽毛球单项赛
      div(class='panel-body')
        h4
          | 比赛时间：（暂定）2014年5月24日、25日
        h4
          | 比赛地点：待定
        p
          | 报名时间：（暂定）2014年5月10日~5月17日
        p
          | （注：以下不是最终比赛顺序，比赛前将会重新抽签安排）
    
    if user == null
      p 请先登录
      hr
    
    div(class='row')
      +showName(1, 1, 'mens_singles', mens_singles)
      +showName(3, 2, 'mens_doubles', mens_doubles)
      
      div(class='clearfix visible-sm')
      
      +showName(4, 2, 'womens_doubles', womens_doubles)
      +showName(5, 2, 'mixed_doubles', mixed_doubles)
    
    hr
  
  include includes/footer
